<!DOCTYPE html>
<html class="no-js">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title></title>
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
<div id="container" style="width:100vw; height:100vh;">
  <svg width="900" height="500">
    <g inkscape:label="Ebene 1" inkscape:groupmode="layer" id="layer1">
      <rect
              style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
              id="rect3713"
              width="100"
              height="50"
      />
    </g>
  </svg>
</div>
<script src="../../node_modules/jspdf-yworks/dist/jspdf.debug.js"></script>
<script src="../../dist/svg2pdf.js"></script>
<script>
  const pdfExport = () => {
    const svgElement = document.querySelector("svg");
    const DPI = 5;
    const millimeter2pixel = (mm, dpi) => {
      return mm * (dpi / 25.4);
    };
    const pixel2millimeter = (pixels, dpi) => {
      return (pixels * 25.4) / dpi;
    };
    const svgWidth = millimeter2pixel(200, DPI);
    const svgHeight = millimeter2pixel(100, DPI);
    svgElement.querySelector("rect").setAttribute("width", `${svgWidth}`);
    svgElement.querySelector("rect").setAttribute("height", `${svgHeight}`);
    // svgElement.setAttribute("width", `${svgWidth + 5}`);
    // svgElement.setAttribute("height", `${svgHeight + 5}`);
    const width = 420,
      height = 297;
    const pdf = new jsPDF("l", "mm", [width, height]);
    svg2pdf(svgElement, pdf, {
      // xOffset: 10,
      // yOffset: 10,
      scale: pixel2millimeter(1, DPI)
    });
    pdf.save("myPDF.pdf");

    // let w = 200 * (1/25.4) * dpi * (25.4/dpi) * (72/25.4)
    // w = 200 * (72/25.4)
  };
  document.addEventListener("DOMContentLoaded", function(event) {
    pdfExport();
  });
</script>
</body>
</html>
